<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRANDPAPA.NET</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/modem.js" defer></script>
</head>
<body>
    <div class="starfield">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>
    <div class="crt">
        <div class="scanlines"></div>
        <main>
            <header>
                <pre class="logo">
 ██████╗ ██████╗  █████╗ ███╗   ██╗██████╗ ██████╗  █████╗ ██████╗  █████╗
██╔════╝ ██╔══██╗██╔══██╗████╗  ██║██╔══██╗██╔══██╗██╔══██╗██╔══██╗██╔══██╗
██║  ███╗██████╔╝███████║██╔██╗ ██║██║  ██║██████╔╝███████║██████╔╝███████║
██║   ██║██╔══██╗██╔══██║██║╚██╗██║██║  ██║██╔═══╝ ██╔══██║██╔═══╝ ██╔══██║
╚██████╔╝██║  ██║██║  ██║██║ ╚████║██████╔╝██║     ██║  ██║██║     ██║  ██║
 ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝ ╚═╝     ╚═╝  ╚═╝╚═╝     ╚═╝  ╚═╝
                </pre>
                <p class="tagline">/// RETRO GAMES FOR THE MODERN AGE ///</p>
            </header>

            <nav>
                <span>[ <a href="index.html">HOME</a> ]</span>
                <span>[ <a href="games.html">GAMES</a> ]</span>
                <span>[ <a href="about.html">ABOUT</a> ]</span>
                <span>[ <a href="contact.html">CONTACT</a> ]</span>
            </nav>

            <section class="content">
                <h2>>>> WELCOME PLAYER <<<</h2>
                <p>INSERT COIN TO CONTINUE...</p>
                <p>GRANDPAPA.NET is home to retro-style games built with love for the classics.</p>
                <p>All games are FREE to play in your browser.</p>

                <div class="featured">
                    <h3>* PLAY NOW *</h3>

                    <div class="game-card">
                        <h4>SPACE JUNK BLASTER</h4>
                        <p>You're a space janitor! Use your plasma torch to melt orbital debris.</p>
                        <p>Watch out for aliens hiding on asteroids!</p>
                        <p>GENRE: ACTION | PLAYERS: 1</p>
                        <a href="play/spacejunkblaster/index.html" class="btn btn-play">>> PLAY GAME <<</a>
                    </div>

                    <div class="game-card">
                        <h4>GIGAPARSEC</h4>
                        <p>Side-scrolling space shooter inspired by TI-99 Parsec.</p>
                        <p>Destroy enemies, dodge asteroids, collect power-ups!</p>
                        <p>GENRE: SHOOTER | PLAYERS: 1</p>
                        <a href="play/gigaparsec/index.html" class="btn btn-play">>> PLAY GAME <<</a>
                    </div>
                </div>

                <div class="stats">
                    <p>GAMES: 2 | ALL FREE | EST. 2025</p>
                </div>
            </section>

            <footer>
                <p>--------------------------------------</p>
                <p>GRANDPAPA.NET (C) 2025</p>
                <p>GAME OVER? NEVER.</p>
            </footer>
        </main>
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="music/arcade-dance.mp3" type="audio/mpeg">
    </audio>
    <button id="musicToggle" class="music-btn">MUSIC: ON</button>
    <script>
        const music = document.getElementById('bgMusic');
        const btn = document.getElementById('musicToggle');
        music.volume = 0.4;

        // Check if user has explicitly turned off music
        const userWantsMusic = localStorage.getItem('grandpapaMusicOff') !== 'true';
        let autoplayBlocked = false;

        function updateButtonState(playing) {
            if (playing) {
                btn.textContent = 'MUSIC: ON';
                btn.classList.add('playing');
            } else {
                btn.textContent = 'MUSIC: OFF';
                btn.classList.remove('playing');
            }
        }

        function tryPlayMusic() {
            if (!userWantsMusic && localStorage.getItem('grandpapaMusicOff') === 'true') return;
            music.play().then(() => {
                updateButtonState(true);
                autoplayBlocked = false;
            }).catch(() => {
                autoplayBlocked = true;
                updateButtonState(false);
            });
        }

        // Try to auto-play music on load (default is ON)
        if (userWantsMusic) {
            tryPlayMusic();
        } else {
            updateButtonState(false);
        }

        // If autoplay was blocked, start music on first user interaction
        document.addEventListener('click', function startMusicOnInteraction() {
            if (autoplayBlocked && localStorage.getItem('grandpapaMusicOff') !== 'true') {
                tryPlayMusic();
            }
            document.removeEventListener('click', startMusicOnInteraction);
        }, { once: true });

        btn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent the document click handler
            if (music.paused) {
                localStorage.removeItem('grandpapaMusicOff');
                music.play();
                updateButtonState(true);
            } else {
                localStorage.setItem('grandpapaMusicOff', 'true');
                music.pause();
                updateButtonState(false);
            }
        });
    </script>
</body>
</html>
